<!doctype html>
<html lang="en">

<head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <div class="container text-center">
        <h1>Pandas thông dụng</h1>
        <span>Menu ==></span>
        <a class="btn btn-success" href="./index.html">Python Cheat Sheet</a>
        <section class="text-start">
            <div class="border-bottom pb-2">
                <h3>1/ pd.read_csv</h3>
                <p>Cú pháp : pd.read_csv('...')</p>
                <p>Đọc những cột được chỉ định: usecols=['col1','col2','col3'] or usecols=[0,1,2]</p>
                <p>Chế độ mã hóa: encoding="utf8" </p>
                <p>Nếu file không có header thì thêm thuộc tính để đánh index cho header: header=None</p>
                <p>Nếu muốn hàng nào làm header thì : header=1 hay header=2,.....</p>
                <p>Gán data type: dtype={'col1':str,'col2':int32}</p>
            </div>
            <div class="border-bottom pb-2">
                <h3>2/ df.dtypes : Kiểm tra kiểu dữ liệu các cột</h3>
            </div>
            <div class="border-bottom pb-2">
                <h3>3/ df.isnull().sum() : Tính số giá trính null của mỗi cột</h3>
            </div>
            <div class="border-bottom pb-2">
                <h3>4/ df.fillna(12345) : Thay thế giá trị Na bằng giá trị nào đó</h3>
            </div>
            <div class="border-bottom pb-2">
                <h3>5/ df.apply(function) : tính toán cho từng hàng hoặc cột (mặc định là cột)</h3>
                <p>Thêm thuộc tính : axis=1 nếu tính theo hàng</p>
                <p>axis=0 là mặc định, tính theo cột</p>
                <p>một số hàm numpy hỗ trợ: np.sum, np.sqrt ,.... =>df.apply(np.sum) ; df.apply(np.sqrt)</p>
                <p><b>Tự tạo function để apply</b> </p>
                <p>def standardize(col): <br>
                    return (col - col.mean())/(col.max()-col.min())</p>
                <p>rating_std = new_df.apply(standardize)</p>
            </div>
            <div class="border-bottom pb-2">
                <h3>df.T : Nghịch đảo hàng thành cột, cột thành hàng</h3>
            </div>
            <div class="border-bottom pb-2">
                <h3>df.groupby(['value1','value2'])["value3"]</h3>
                <b>Ví dụ</b>
                <p>a = df.groupby(["Category"])["Order ID"].unique() ==> trả về các giá trị unique</p>
                <p>a = df.groupby(["Category"])["Order ID"].nunique() ==> đếm số lượng unique</p>
                <p>a = df.groupby('Category')['Profit'].sum() ==> Nhóm song rồi tính tổng theo cột 'Profit'</p>
            </div>
            <div class="border-bottom pb-2">
                <h3>pd.DataFrame(data,index=[...],columns=[...]) ==> Tạo dataframe</h3>
            </div>
            <div class="border-bottom pb-2">
                <h3>data.sort_values("Name", axis = 0, ascending = True, inplace = False, na_position ='last')</h3>
                <p>Sort theo trường "Name"</p>
                <p>axis=0 =>Sort theo cột</p>
                <p>ascending = True => tăng dần , "False" giảm dần</p>
                <p>inplace= True => sắp xếp trực tiếp trên dataframe, "False" sẽ trả về dataframe mới</p>
                <p>nếu có giá trị na_position thì xếp ở đâu : "last" , "first"</p>
            </div>
            <div class="border-bottom pb-2">
                <h3>df.dropna(axis=0, how='any', thresh=None, subset=None, inplace=False)</h3>
                <p>thresh = None hoặc integer => số lượng giá trị khác NaN trong dòng hoặc cốt ít nhất là bao nhiêu để
                    không drop</p>
                <p>user_ratings.dropna(thresh=10,axis=1).fillna(0)</p>
            </div>
            <div class="border-bottom pb-2">
                <h3>Select row with conditions</h3>
                <ul>
                    <li>df.loc[df['column_name'] == some_value]</li>
                    <li>df.loc[df['column_name'].isin(some_values)]</li>
                    <li>df.loc[(df['column_name'] >= A) & (df['column_name'] <= B)]</li>
                    <li>df.loc[df['column_name'] != some_value]</li>
                    <li>So to select rows whose value is not in some_values:
                        df.loc[~df['column_name'].isin(some_values)]</li>
                </ul>
            </div>
            <div class="border-bottom pb-2">
                <h3>Khởi tạo Series với Pandas</h3>
                <p>pd.Series([5, 1, 3, 7, np.nan, 6])</p>
                <p>data là giữ liệu cho series</p>
                <p>index là các chỉ số index, nếu đặt ko thì mặc định là từ 0</p>
                <p>dtype : đặt kiểu dữ liệu cho data</p>
                <p>name: đặt tên cho series</p>
                <p>copy = True or False, nếu False thì gán trực tiếp mảng trong data cho series, false thì dữ liệu trong
                    data sẽ được copy ra và gán cho series mảng trong data và dừ liệu trong series tách biệt lẫn nhau
                </p>
                <img src="./img/series.png" alt="">
                <span class="badge bg-warning  text-dark">series</span>
            </div>
            <div class="border-bottom pb-2">
                <h3>Gán index cho một series sẵn có</h3>
                <p>a = pd.Series([5, 1, 3, 7])</p>
                <p>a.index = list("1234") => đánh index cho series a từ 1 đến 4</p>
                <span class="badge bg-warning  text-dark">series</span>
            </div>
            <div class="border-bottom pb-2">
                <h3>Reset Index</h3>
                <p>a = pd.Series([5, 1, 3, 7])</p>
                <p>a.reset_index() Hoặc</p>
                <p>s.reset_index(drop=True, inplace=True)</p>
                <b>Nếu không có drop=True, thì index mới sẽ ở ngoài index cũ, drop= True để loại bỏ index cũ
                    <br>
                    inplace=True => chỉnh sửa trực tiếp trên series hiện tại, ko trả về seri mới
                </b>
                <span class="badge bg-warning  text-dark">reset</span>
                <span class="badge bg-warning  text-dark">index</span>
            </div>
            <div class="border-bottom pb-2">
                <h3>Series value: lấy các giá trị của series hay dataframe</h3>
                <p>s.values ,df.values , df.to_numpy()</p>
                <span class="badge bg-warning  text-dark">values</span>
            </div>
            <div class="border-bottom pb-2">
                <h3>Series describe: lấy cột giá trị của series</h3>
                <p>s.describe() => lấy thông tin tổng quát của series như: count, mean, std, max, tứ phân vị</p>
                <span class="badge bg-warning  text-dark">values</span>
            </div>
            <div class="border-bottom pb-2">
                <h3>Truy cập series, gán, thêm cho series</h3>
                <p>s[4] lấy giá trị tại index = 4</p>
                <p>s[4] = 5 , gán phần tử tại index 4 bằng giá trị 5, nếu index 4 chưa có trong series => sẽ tự động
                    thêm index 4 và gán giá trị</p>
                <span class="badge bg-warning  text-dark">values</span>
            </div>
            <div class="border-bottom pb-2">
                <h3>iloc : => lấy giá trị tại 1 vị trị nào đó, vị trí luôn đánh số bắt đầu từ 0</h3>
                <p>s.iloc[i]</p>
                <span class="badge bg-warning  text-dark">values</span>
            </div>
            <div class="border-bottom pb-2">
                <h3>loc : => lấy giá trị tại 1 vị trị nào đó, ví trị dựa vào index (index bằng số hay gì đó tùy vào lúc
                    tạo series)</h3>
                <p>s.iloc[i]</p>
                <span class="badge bg-warning  text-dark">values</span>
            </div>
            <div class="border-bottom pb-2">
                <h3> Series Slicing</h3>
                <p>tương tự như list ,series cũng có thể slicing bằng cách s[1:3] , s[0:10:2] , s[::2] ,..., s['a':'f']
                </p>
                <span class="badge bg-warning  text-dark">slicing</span>
            </div>
            <div class="border-bottom pb-2">
                <h3> head, tail : lấy những giá trị đầu, cuối => dùng cho series hay dataframe đều được</h3>
                <p> head(), tail() ,head(10), tail(10),....</p>
                <span class="badge bg-warning  text-dark">head</span>
                <span class="badge bg-warning  text-dark">tail</span>
            </div>
            <div class="border-bottom pb-2">
                <h3>Truy cập cột của dataframe</h3>
                <p>df['tên cột'], df.ten-cot, df[['tên cột 1','tên cột 2','tên cột 3']]</p>
                <span class="badge bg-warning  text-dark">dataframe</span>
                <span class="badge bg-warning  text-dark">column</span>
            </div>
            <div class="border-bottom pb-2">
                <h3>tạo dataframe</h3>
                <p>Cách 1: a = np.random.randint(0, 10, size=(10,4))</p>
                <p>df1 = pd.DataFrame(data=a, index=range(1,11), columns=list('ABCD'), dtype='uint8')</p>
                <p>Cách 2: d = {'A':[1,2,3,4], 'B':[4,5,8,0], 'C':[4,9,8,7], 'D':[6,5,8,6]}
                    <br>
                    df2 = pd.DataFrame(d, copy=True)</p>
                <span class="badge bg-warning  text-dark">dataframe</span>
                <span class="badge bg-warning  text-dark">tạo</span>
            </div>
        </section>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
</body>

</html>